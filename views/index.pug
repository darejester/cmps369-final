extends layout.pug

block content
  nav
    //a(href='/login') Sign in
    if user 
        span
            span Logged in: #{user.firstName} #{user.lastName}  
            a(href='/logout') Sign out
    else
        a(href='/login') Sign in
    a(href='/create') Create a new contact
    
  h1 Contact List
    
  .container
    table
      thead
        tr
          th Name
          th Phone
          th Email
          th Address
          th Contact
      tbody
        each contact in allContacts
          tr
            td: a(href=`/${contact.id}`) #{contact.firstName} #{contact.lastName}
            td #{contact.phoneNumber}
            td #{contact.emailAddress}
            td #{contact.address}
            td
              section
                input#contactByPhone(type='checkbox', disabled, checked = contact.contactByPhone)
                label(for='phone') Phone
              section
                input#contactByEmail(type='checkbox', disabled, checked = contact.contactByEmail)
                label(for='email') Email

  #map-container
    #map
  
  
  link(href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css", rel="stylesheet")
  style.
    #map-container {
      height: calc(100vh - 140px);

      margin-bottom: 2rem;
    }
    #map { 
      height: 50%;
      width: 50%;
      margin: 0 auto;
    }
    tr {
      cursor: pointer;
    }
  
  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js", integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM", crossorigin="anonymous")
  script(src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js")
  script.
    const map = L.map('map').setView([41.08224455, -74.1738235180645], 13);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

